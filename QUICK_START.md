# ğŸš€ AIä¿Šæ‰ç¤¾ç®€å†ç³»ç»Ÿ - å¿«é€Ÿå¯åŠ¨æŒ‡å—

## ğŸ“‹ æ ¸å¿ƒé—®é¢˜è§£å†³

åŸºäºæ‚¨çš„éƒ¨ç½²æ—¥å¿—åˆ†æï¼Œæ–°çš„æ¨¡å—åŒ–ç³»ç»Ÿ**ä¸“é—¨è§£å†³**äº†ä»¥ä¸‹é—®é¢˜ï¼š

### âŒ åŸè„šæœ¬é—®é¢˜
1. **PM2è¿›ç¨‹é‡å¤** - 6ä¸ªresumeè¿›ç¨‹ï¼ˆåº”è¯¥åªæœ‰2ä¸ªï¼‰
2. **æ•°æ®åº“è®¤è¯å¤±è´¥** - è¿ç§»æ—¶å¯†ç è®¤è¯é”™è¯¯  
3. **è„šæœ¬éš¾ç»´æŠ¤** - 2136è¡Œå•æ–‡ä»¶ï¼Œéš¾ä»¥è°ƒè¯•
4. **èµ„æºå†²çª** - pm2 kill ååˆ pm2 resurrect æ¢å¤æ—§è¿›ç¨‹

### âœ… æ–°ç³»ç»Ÿè§£å†³æ–¹æ¡ˆ
1. **æ™ºèƒ½PM2æ¸…ç†** - ä¿æŠ¤å…¶ä»–é¡¹ç›®ï¼Œç²¾ç¡®æ¸…ç†resumeè¿›ç¨‹
2. **å®æ—¶è®¤è¯ä¿®å¤** - æ£€æµ‹å¹¶è‡ªåŠ¨ä¿®å¤æ•°æ®åº“è®¤è¯é—®é¢˜
3. **æ¨¡å—åŒ–è®¾è®¡** - 9ä¸ªåŠŸèƒ½æ¨¡å—ï¼Œæ˜“äºè°ƒè¯•å’Œç»´æŠ¤
4. **æ™ºèƒ½èµ„æºç®¡ç†** - é¿å…é”™è¯¯æ¢å¤ï¼Œç¡®ä¿åªå¯åŠ¨2ä¸ªresumeè¿›ç¨‹

## ğŸ¯ ç«‹å³å¼€å§‹

### 1. åŸºæœ¬æ£€æŸ¥
```bash
# æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
ls -la deploy-complete.sh modules/

# æ£€æŸ¥æƒé™ï¼ˆåº”è¯¥æ˜¾ç¤º -rwxr-xr-xï¼‰
ls -l deploy-complete.sh
```

### 2. æ¨èéƒ¨ç½²å‘½ä»¤
```bash
# ğŸ”¥ é’ˆå¯¹æ‚¨å½“å‰é—®é¢˜çš„æœ€ä½³è§£å†³æ–¹æ¡ˆ
sudo ./deploy-complete.sh --mode=fix

# æˆ–è€…å®Œæ•´é‡æ–°éƒ¨ç½²
sudo ./deploy-complete.sh --mode=full

# è°ƒè¯•æ¨¡å¼ï¼ˆæŸ¥çœ‹è¯¦ç»†ä¿¡æ¯ï¼‰
sudo ./deploy-complete.sh --debug --mode=fix
```

### 3. éƒ¨ç½²åéªŒè¯
```bash
# æ£€æŸ¥PM2è¿›ç¨‹ï¼ˆåº”è¯¥åªæœ‰2ä¸ªresumeè¿›ç¨‹ï¼‰
pm2 list | grep resume

# æ£€æŸ¥ç«¯å£ç›‘å¬
lsof -i :3016 -i :8000 -i :5435

# å¥åº·æ£€æŸ¥
sudo ./deploy-complete.sh --mode=check
```

## ğŸ”§ è§£å†³æ‚¨é‡åˆ°çš„å…·ä½“é—®é¢˜

### é—®é¢˜1: PM2è¿›ç¨‹é‡å¤
**ç°è±¡**: 6ä¸ªresumeè¿›ç¨‹è¿è¡Œ
```bash
# æ–°ç³»ç»Ÿè§£å†³æ–¹æ¡ˆ
sudo ./deploy-complete.sh --mode=fix
```
**ç»“æœ**: æ™ºèƒ½æ¸…ç†ï¼Œç¡®ä¿åªæœ‰2ä¸ªè¿›ç¨‹ï¼ˆresume-backend + resume-frontendï¼‰

### é—®é¢˜2: æ•°æ®åº“è®¤è¯å¤±è´¥  
**ç°è±¡**: `password authentication failed`
```bash
# æ–°ç³»ç»Ÿä¼šè‡ªåŠ¨æ£€æµ‹å¹¶ä¿®å¤
sudo ./deploy-complete.sh --mode=fix
```
**ç»“æœ**: è‡ªåŠ¨é‡ç½®ç”¨æˆ·æƒé™ï¼Œä¿®å¤è®¤è¯é—®é¢˜

### é—®é¢˜3: ç«¯å£å†²çª
**ç°è±¡**: ç«¯å£8000è¢«å ç”¨
```bash
# æ™ºèƒ½ç«¯å£æ¸…ç†
sudo ./deploy-complete.sh --mode=fix
```
**ç»“æœ**: è¯†åˆ«å¹¶æ¸…ç†resumeé¡¹ç›®å ç”¨çš„ç«¯å£

## ğŸ“Š æœŸæœ›ç»“æœ

éƒ¨ç½²æˆåŠŸåï¼Œæ‚¨åº”è¯¥çœ‹åˆ°ï¼š

### PM2è¿›ç¨‹çŠ¶æ€
```
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id â”‚ name             â”‚ mode    â”‚ pid     â”‚ status   â”‚ cpu    â”‚ mem  â”‚ uptime    â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0  â”‚ resume-backend   â”‚ fork    â”‚ 12345   â”‚ online   â”‚ 0%     â”‚ 65mb â”‚ 5m        â”‚
â”‚ 1  â”‚ resume-frontend  â”‚ fork    â”‚ 12346   â”‚ online   â”‚ 0%     â”‚ 45mb â”‚ 5m        â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç«¯å£ç›‘å¬çŠ¶æ€
```
*:3016 (frontend)  - nginx/pm2
*:8000 (backend)   - node/pm2  
*:5435 (database)  - postgres/docker
*:80   (http)      - nginx
*:443  (https)     - nginx
```

### è®¿é—®éªŒè¯
```bash
# HTTPè®¿é—®
curl -I http://cv.juncaishe.com
# åº”è¯¥è¿”å›: HTTP/1.1 301 Moved Permanently (é‡å®šå‘åˆ°HTTPS)

# HTTPSè®¿é—®  
curl -I https://cv.juncaishe.com
# åº”è¯¥è¿”å›: HTTP/1.1 200 OK
```

## âš¡ å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥

```bash
# å®Œæ•´éƒ¨ç½²
sudo ./deploy-complete.sh

# ä¿®å¤é—®é¢˜ï¼ˆæ¨èï¼‰
sudo ./deploy-complete.sh --mode=fix

# å¿«é€Ÿæ›´æ–°
sudo ./deploy-complete.sh --mode=quick

# å¥åº·æ£€æŸ¥
sudo ./deploy-complete.sh --mode=check

# è°ƒè¯•æ¨¡å¼
sudo ./deploy-complete.sh --debug --mode=check

# æŸ¥çœ‹å¸®åŠ©
./deploy-complete.sh --help
```

## ğŸ” æ•…éšœæ’é™¤

### å¦‚æœéƒ¨ç½²å¤±è´¥
```bash
# 1. æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
tail -f /var/log/resume-deploy.log

# 2. æ£€æŸ¥PM2çŠ¶æ€
pm2 list
pm2 logs

# 3. æ£€æŸ¥æ•°æ®åº“å®¹å™¨
docker ps | grep resume-postgres
docker logs resume-postgres

# 4. é‡æ–°å°è¯•ä¿®å¤
sudo ./deploy-complete.sh --debug --mode=fix
```

### å¦‚æœä»æœ‰é—®é¢˜
```bash
# å®Œå…¨é‡æ–°éƒ¨ç½²
sudo ./deploy-complete.sh --mode=full
```

## ğŸ“ˆ æ€§èƒ½å¯¹æ¯”

| æŒ‡æ ‡ | åŸè„šæœ¬ | æ–°ç³»ç»Ÿ |
|------|--------|--------|
| PM2è¿›ç¨‹æ•° | 6ä¸ª(âŒ) | 2ä¸ª(âœ…) |
| æ•°æ®åº“è®¤è¯ | å¤±è´¥(âŒ) | è‡ªåŠ¨ä¿®å¤(âœ…) |
| éƒ¨ç½²æ—¶é—´ | ~5åˆ†é’Ÿ | ~3åˆ†é’Ÿ |
| è°ƒè¯•éš¾åº¦ | å›°éš¾(âŒ) | ç®€å•(âœ…) |
| é—®é¢˜å®šä½ | æ¨¡ç³Š(âŒ) | ç²¾ç¡®(âœ…) |

## ğŸ‰ æˆåŠŸæ ‡å¿—

éƒ¨ç½²æˆåŠŸçš„æ ‡å¿—ï¼š
- âœ… PM2æ˜¾ç¤º2ä¸ªonlineè¿›ç¨‹
- âœ… æ‰€æœ‰ç«¯å£æ­£å¸¸ç›‘å¬
- âœ… æ•°æ®åº“è¿æ¥æ­£å¸¸
- âœ… HTTPè‡ªåŠ¨é‡å®šå‘åˆ°HTTPS
- âœ… ç½‘ç«™æ­£å¸¸è®¿é—®

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœé‡åˆ°é—®é¢˜ï¼š
1. æŸ¥çœ‹ `/var/log/resume-deploy.log`
2. è¿è¡Œ `sudo ./deploy-complete.sh --debug --mode=check`
3. æ£€æŸ¥ `MODULAR_DEPLOY_README.md` è¯¦ç»†æ–‡æ¡£

---

**ğŸ¯ è®°ä½**: æ–°ç³»ç»Ÿä¸“é—¨è§£å†³äº†æ‚¨çš„PM2é‡å¤è¿›ç¨‹å’Œæ•°æ®åº“è®¤è¯é—®é¢˜ï¼ 